!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof module&&module.exports?module.exports=n():e.CRSA=n()}(this,function(){"use strict";return function(c){function f(e,n,t){return Math.floor(.01*+n*l[t])+"px"}var n,t,r=this,a={},s={},i=!1,o=!1,m=!1,l={cmin:0,cmax:0,cavg:0,cw:0,ch:0},d=/(\d+)(cmin|cmax|cavg|cw|ch)/g,u=!1,v=1e12,h=250,g=-1,w=-h,p=null,y=null,b=null,x=null,A=window.requestAnimationFrame,C=window.cancelAnimationFrame;A&&C||(A=function(e){return setTimeout(e,16)},C=function(e){clearTimeout(e)});function R(e){"u"!==e&&e||(null!==x&&C(x),null!==b&&clearInterval(b),b=x=null),"a"!==e&&e||(null!==y&&C(y),null!==p&&clearInterval(p),p=y=null)}function M(e){u||(R(e),"u"!==e&&e||(0<v&&v<1e12&&(b=setTimeout(n,v)),v<=0&&(x=A(n))),("a"===e||!e)&&0<v&&h<v&&(0<h?p=setTimeout(t,h):y=A(t)))}function e(e){var n,t;M(e),c&&c.getBoundingClientRect&&(t=c.getBoundingClientRect())&&(n=t.right-t.left,t=t.bottom-t.top,!n||!t||n===l.cw&&t===l.ch&&m&&"u"!==e||r.defineDimensions(n,t))}function q(){var e;c&&o&&(e=performance.now(),g<=e-w&&t())}function E(){for(var e in s)for(var n in s[e])for(var t=0;t<s[e][n].elements.length;t++){var r=s[e][n].elements[t],i=s[e][n].values[t];r&&(r.style[n]=i)}}function L(){if(c){for(var e in M(),E(),a){var n,t=c.querySelectorAll(e);for(n in t.length||(t=document.querySelectorAll(e)),a[e]){if(t.length)for(var r=a[e][n].replace(d,f),i=0;i<t.length;i++){var o=t[i].style;s[e][n].elements[i]=t[i],s[e][n].values[i]=o[n],o[n]=r}var l=t.length,u=s[e][n].elements.length-l;0<u&&(s[e][n].elements.splice(l,u),s[e][n].values.splice(l,u))}}m=!0,w=performance.now()}}r.defineStyles=function(e){if(e&&"object"==typeof e){for(var n in o&&E(),a={},s={},e)for(var t in a[n]={},s[n]={},e[n])s[n][t]={elements:[],values:[]},a[n][t]=e[n][t];return o=!0,i&&c&&L(),!i&&c&&r.refresh(),r}},r.defineContainer=function(e){return"string"==typeof e&&(e=document.querySelector(e)),c=e instanceof HTMLElement?e:null,i=m=!1,o&&c&&r.refresh(),o&&!c&&E(),r},r.defineDimensions=function(e,n){return i=!0,l.cw=e,l.ch=n,l.cmin=Math.min(e,n),l.cmax=Math.max(e,n),l.cavg=Math.floor(Math.sqrt(e*n)),L(),r},r.enableAutoRefresh=function(){return 0<arguments.length&&(g=arguments[0]),1<arguments.length&&(h=arguments[1]),2<arguments.length&&(v=arguments[2]),u=!1,n(),h<0||v<0?window.removeEventListener("resize",q):window.addEventListener("resize",q),r},r.disableAutoRefresh=function(){return R(),window.removeEventListener("resize",q),u=!0,r},r.refresh=function(){if(!c||!c.getBoundingClientRect)return r;if(!o)return r;var e=c.getBoundingClientRect();if(!e)return r;var n=e.right-e.left,e=e.bottom-e.top;return r.defineDimensions(n,e),r},t=e.bind(null,"a"),n=e.bind(null,"u"),r.defineContainer(c),window.addEventListener("resize",q)}});